# readable code
.es(
  index=shopping, 
  timefield=주문시간,
  metric=sum:상품가격, 
  q=고객성별:남성
).sum(
   .es(
     index=shopping, 
     timefield=주문시간, 
     metric=sum:상품가격, 
     q=고객성별:남성, 
      offset=-1y
   )
 ).label(매출합계)
    
# timelion format
.es(index=shopping, timefield=주문시간, metric=sum:상품가격, q=고객성별:남성).sum(.es(index=shopping, timefield=주문시간, metric=sum:상품가격, q=고객성별:남성, offset=-1y)).label(매출합계)
